/* ============================================================
   lang.js
   å¤šè¯­è¨€åŒ…ï¼šç®€ä½“ä¸­æ–‡ / ç¹é«”ä¸­æ–‡ / English
============================================================ */

const LANG_PACK = {
    "zh-CN": {
        title: "ğŸ³ ä»Šæ—¥æ—©é¤æ¨è",
        subtitle: "ä¸ºä½ ç”Ÿæˆç®€å•ã€å‡è¡¡çš„æ—©é¤ç»„åˆ",

        name: "å¤§å",
        date: "æ—¥æœŸ",
        mode: "ç”Ÿæˆæ–¹å¼",

        mode_custom: "è‡ªä¸»é€‰æ‹©ææ–™",
        mode_smart: "æ™ºèƒ½ç”Ÿæˆ",

        search: "æœç´¢ææ–™",
        selected: "å·²é€‰æ‹©ææ–™",
        custom_title: "é€‰æ‹©ä½ ä»Šå¤©æƒ³åƒçš„ææ–™",
        generate_custom: "æ ¹æ®ææ–™ç”Ÿæˆæ—©é¤",

        generate: "æ¨èæ—©é¤",
        history: "æŸ¥çœ‹å†å²",
        clear_history: "æ¸…é™¤å†å²",

        no_history: "æš‚æ— å†å²è®°å½•",
        delete_day: "åˆ é™¤å½“å¤©è®°å½•",
        confirm_delete: "ç¡®å®šåˆ é™¤è¿™ä¸€å¤©çš„è®°å½•å—ï¼Ÿ",

        smart_loading: "æ­£åœ¨ä¸ºä½ å‡†å¤‡æ—©é¤â€¦",
        smart_result_prefix: "ä½ çš„æ—©é¤æ˜¯ï¼š",

        /* â˜… ç»Ÿä¸€å¡è·¯é‡Œå‰ç¼€ä¸º ğŸ”¥ */
        smart_kcal_prefix: "ğŸ”¥ ",
        kcal_prefix: "ğŸ”¥ ",

        /* â˜… ç¿»è¯‘æç¤º */
        already_recorded: "ä»Šå¤©å·²ç»æœ‰è®°å½•äº†ï¼",
        recorded_tip: "å·²è®°å½•ï¼",

        smart_items: [
            "ğŸ¥š é¸¡è›‹ + ğŸ åå¸ + ğŸ¥› ç‰›å¥¶",
            "ğŸ¥£ ç‡•éº¦ + ğŸ æ°´æœ + ğŸ¥› é…¸å¥¶",
            "ğŸš ç²¥ + ğŸ¥š é¸¡è›‹ + ğŸ¥¤ è±†æµ†",
            "ğŸ¥ª ä¸‰æ˜æ²» + â˜• å’–å•¡",
            "ğŸ é¢åŒ… + ğŸ¥“ ç«è…¿ + ğŸ§ƒ æœæ±"
        ],

        choose_this: "é€‰æ‹©è¿™ä¸ª",

        placeholder_name: "è¯·è¾“å…¥ä½ çš„åå­—",
        placeholder_search: "æœç´¢ææ–™",

        save_custom: "è®°å½•åˆ°å†å²è®°å½•",
        reset_custom: "é‡æ–°é€‰æ‹©",
        saved_tip: "å·²ä¿å­˜åˆ°å†å²è®°å½•ï¼"
    },

    "zh-HK": {
        title: "ğŸ³ ä»Šæ—¥æ—©é¤æ¨è–¦",
        subtitle: "ç‚ºä½ ç”Ÿæˆç°¡å–®ã€å‡è¡¡çš„æ—©é¤çµ„åˆ",

        name: "å¤§å",
        date: "æ—¥æœŸ",
        mode: "ç”Ÿæˆæ–¹å¼",

        mode_custom: "è‡ªä¸»é¸æ“‡ææ–™",
        mode_smart: "æ™ºèƒ½ç”Ÿæˆ",

        search: "æœå°‹ææ–™",
        selected: "å·²é¸ææ–™",
        custom_title: "é¸æ“‡ä½ ä»Šæ—¥æƒ³é£Ÿå˜…ææ–™",
        generate_custom: "æ ¹æ“šææ–™ç”Ÿæˆæ—©é¤",

        generate: "æ¨è–¦æ—©é¤",
        history: "æŸ¥çœ‹æ­·å²",
        clear_history: "æ¸…é™¤æ­·å²",

        no_history: "æš«ç„¡æ­·å²è¨˜éŒ„",
        delete_day: "åˆªé™¤ç•¶å¤©è¨˜éŒ„",
        confirm_delete: "ç¢ºå®šåˆªé™¤å‘¢ä¸€æ—¥å˜…è¨˜éŒ„å—ï¼Ÿ",

        smart_loading: "ç‚ºä½ æº–å‚™æ—©é¤ä¸­â€¦",
        smart_result_prefix: "ä½ å˜…æ—©é¤ä¿‚ï¼š",

        /* â˜… ç»Ÿä¸€å¡è·¯é‡Œå‰ç¼€ä¸º ğŸ”¥ */
        smart_kcal_prefix: "ğŸ”¥ ",
        kcal_prefix: "ğŸ”¥ ",

        /* â˜… ç¿»è¯‘æç¤º */
        already_recorded: "ä»Šæ—¥å·²ç¶“æœ‰è¨˜éŒ„ï¼",
        recorded_tip: "å·²è¨˜éŒ„ï¼",

        smart_items: [
            "ğŸ¥š é›è›‹ + ğŸ å¤šå£« + ğŸ¥› ç‰›å¥¶",
            "ğŸ¥£ ç‡•éº¥ + ğŸ ç”Ÿæœ + ğŸ¥› ä¹³é…ª",
            "ğŸš ç²¥ + ğŸ¥š é›è›‹ + ğŸ¥¤ è±†æ¼¿",
            "ğŸ¥ª ä¸‰æ–‡æ²» + â˜• å’–å•¡",
            "ğŸ éºµåŒ… + ğŸ¥“ ç«è…¿ + ğŸ§ƒ æœæ±"
        ],

        choose_this: "æ€å‘¢å€‹",

        placeholder_name: "è«‹è¼¸å…¥ä½ çš„åå­—",
        placeholder_search: "æœå°‹ææ–™",

        save_custom: "è¨˜éŒ„åˆ°æ­·å²è¨˜éŒ„",
        reset_custom: "é‡æ–°é¸æ“‡",
        saved_tip: "å·²ä¿å­˜åˆ°æ­·å²è¨˜éŒ„ï¼"
    },

    "en": {
        title: "ğŸ³ Today's Breakfast",
        subtitle: "Simple and balanced breakfast suggestions",

        name: "Name",
        date: "Date",
        mode: "Generation Mode",

        mode_custom: "Custom Ingredients",
        mode_smart: "Smart Suggestions",

        search: "Search Ingredients",
        selected: "Selected Ingredients",
        custom_title: "Choose what you want to eat today",
        generate_custom: "Generate Breakfast",

        generate: "Recommend Breakfast",
        history: "View History",
        clear_history: "Clear History",

        no_history: "No history yet",
        delete_day: "Delete This Day",
        confirm_delete: "Delete this day's record?",

        smart_loading: "Preparing your breakfastâ€¦",
        smart_result_prefix: "Your breakfast is:",

        /* â˜… ç»Ÿä¸€å¡è·¯é‡Œå‰ç¼€ä¸º ğŸ”¥ */
        smart_kcal_prefix: "ğŸ”¥ ",
        kcal_prefix: "ğŸ”¥ ",

        /* â˜… ç¿»è¯‘æç¤º */
        already_recorded: "You already have a record today!",
        recorded_tip: "Saved!",

        smart_items: [
            "ğŸ¥š Egg + ğŸ Toast + ğŸ¥› Milk",
            "ğŸ¥£ Oatmeal + ğŸ Fruit + ğŸ¥› Yogurt",
            "ğŸš Porridge + ğŸ¥š Egg + ğŸ¥¤ Soy Milk",
            "ğŸ¥ª Sandwich + â˜• Coffee",
            "ğŸ Bread + ğŸ¥“ Ham + ğŸ§ƒ Juice"
        ],

        choose_this: "Choose this",

        placeholder_name: "Enter your name",
        placeholder_search: "Search ingredients",

        save_custom: "Save to History",
        reset_custom: "Reset Selection",
        saved_tip: "Saved to history!"
    }
};


/* ============================================================
   å½“å‰è¯­è¨€çŠ¶æ€
============================================================ */

let CURRENT_LANG = "zh-CN";
let langChangeCallbacks = [];


/* ============================================================
   APIï¼šä¾› app.js è°ƒç”¨
============================================================ */

function getLang() {
    return CURRENT_LANG;
}

function getLangPack() {
    return LANG_PACK[CURRENT_LANG];
}

function setLangInternal(lang) {
    if (!LANG_PACK[lang]) return;
    CURRENT_LANG = lang;
    localStorage.setItem("lang", lang);

    const pack = LANG_PACK[lang];
    langChangeCallbacks.forEach(fn => fn(pack, lang));
}

function onLangChange(callback) {
    if (typeof callback === "function") {
        langChangeCallbacks.push(callback);
    }
}


/* ============================================================
   åˆå§‹åŒ–ï¼šæ¢å¤ä¸Šæ¬¡è¯­è¨€
============================================================ */

(function initLang() {
    const saved = localStorage.getItem("lang");
    if (saved && LANG_PACK[saved]) {
        CURRENT_LANG = saved;
    }
})();
